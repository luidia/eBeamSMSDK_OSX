//
//  DrawViewWindowController.m
//  PenTestOSX
//
//  Created by Luidia on 2019
//  Copyright © 2019년 Luidia. All rights reserved.
//

#import "DrawViewWindowController.h"
#import "DrawView.h"
#import "PNFPenLibOSXExtension.h"
@interface DrawViewWindowController ()
{
    
}
@end

@implementation DrawViewWindowController
@synthesize penController;
@synthesize drawView;
@synthesize calibrationSize;
@synthesize drawViewSize;
@synthesize delegate;

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        self.delegate = nil;
    }
    return self;
}

- (BOOL)windowShouldClose:(NSWindow *)sender {
    if (self.delegate)
    {
        if ([self.delegate respondsToSelector:@selector(closeDrawViewWindowController)])
            [self.delegate closeDrawViewWindowController];
    }
    
    return YES;
}

- (void)windowDidLoad
{
    [super windowDidLoad];
    
    int marginY = (self.window.frame.size.height - drawViewSize.height)/2;
    [drawView setFrame:CGRectMake(0, marginY, drawViewSize.width, drawViewSize.height)];
    
    [drawView changeDrawingSize];
    
    
}
- (IBAction)clearClicked:(id)sender {
    [self.drawView clear];
}

-(void) SetDrawInfo:(int)status pressure:(int)pressure pt:(CGPoint)pt color:(NSColor*)color erase:(BOOL)erase eraseSize:(float)eraseSize {
    [drawView DoPenProcess:status pressure:pressure X:pt.x Y:pt.y color:color erase:erase eraseSize:eraseSize];
}
@end
