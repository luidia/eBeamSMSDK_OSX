//
//  AppDelegate.m
//  PenTestOSX
//
//  Created by Luidia on 2019
//  Copyright © 2019년 Luidia. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize mainWindowController;

-(void) dealloc {
    if (mainWindowController)
        [mainWindowController release];
    
    [super dealloc];
}
- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender {
    [mainWindowController closeSelf];
    return NSTerminateCancel;
}
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    
    dispatch_queue_t aQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(aQueue, ^{
        
        dispatch_sync(dispatch_get_main_queue(), ^{
            if (mainWindowController == nil)
                mainWindowController = [[MainWindowController alloc] initWithWindowNibName:@"MainWindowController"];
            [mainWindowController.window makeKeyAndOrderFront:mainWindowController];
            [mainWindowController.window setOrderedIndex:0];
        });
    });

}
-(BOOL) applicationShouldHandleReopen:(NSApplication *)sender hasVisibleWindows:(BOOL)flag {
    if (!flag) {
        [mainWindowController.window makeKeyAndOrderFront:self];
        return YES;
    }
    return NO;
}

@end
